<!doctype html>
<html lang="en">
  <head>
    <title>Flex Book - CS4241 Assignment 2</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <h1>FlexBook</h1>
    <h2>CS4241 Assignment #2</h2>
    <h3>Preview</h3>
    <div class="prev">
      <div class="icon">
        <div class="head"></div>
        <div class="body"></div>
      </div>
      <div class="basicInfo">
        <p class="topText">Jordan Wecler</p>
        <p>He/Him</p>
        <p>19 years old</p>
        <p class="topText">Contact:</p>
        <p>123-456-7890</p>
        <p>name@email.com</p>

      </div>
      <div class="aboutInfo">
        <p class="topText">About:</p>
        <p>From Some Where, NJ</p>
        <p>WPI Class of 2024</p>
        <p>Computer Science Major</p>
        <p>Likes Photography</p>
      </div>

    </div>
    <h3>Create Profile</h3>
    <div class="createProf">
      <div class="profInput">
        <label for="name">Name:</label>
        <input type="text" class="inputText" id="name" placeholder="John Doe" required size="20">
      </div>
      <div class="profInput">
        <label for="Pronouns">Pronouns:</label>
        <input type="text" class="inputText" id="pronouns" placeholder="He/Him" required size="20">
      </div>
      <div class="profInput">
        <label for="Birthday">Birthday:</label>
        <input type="date" class="inputText" id="birthday">
      </div>
      <div class="profInput">
        <label for="email">Email:</label>
        <input type="text" class="inputText" id="email" placeholder="jdoe@email.com" required size="20">
      </div>
      <div class="profInput">
        <label for="phone">Phone:</label>
        <input type="text" class="inputText" id="phone" placeholder="123-456-7890" required size="20">
      </div>
      <div class="profInput">
        <label for="Hometown">Hometown:</label>
        <input type="text" class="inputText" id="hometown" placeholder="Los Angeles, CA"  required size="20">
      </div>
      <div class="profInput">
        <label for="Education">Education:</label>
        <input type="text" class="inputText" id="education" placeholder="Harvard Class of 2024" required size="20">
      </div>
      <div class="profInput">
        <label for="Major">Major:</label>
        <input type="text" class="inputText" id="major" placeholder="Computer Science" required size="20">
      </div>
      <div class="profInput">
        <label for="Likes">Likes:</label>
        <input type="text" class="inputText" id="likes" placeholder="Photography" required size="20">
      </div>
      <div class="profInput">
        <label for="Primary Color">Primary Color:</label>
        <select class="inputText" id="primary">
          <option></option>
          <option value="red">Red</option>
          <option value="orange">Orange</option>
          <option value="yellow">Yellow</option>
          <option value="green">Green</option>
          <option value="blue">Blue</option>
          <option value="purple">Purple</option>
          <option value="pink">Pink</option>
          <option value="black">Black</option>
          <option value="white">Grey</option>
        </select>
      </div>
      <div class="profInput">
        <label for="Secondary Color">Secondary Color:</label>
        <select class="inputText" id="secondary">
          <option></option>
          <option value="red">Red</option>
          <option value="orange">Orange</option>
          <option value="yellow">Yellow</option>
          <option value="green">Green</option>
          <option value="blue">Blue</option>
          <option value="purple">Purple</option>
          <option value="pink">Pink</option>
          <option value="black">White</option>
          <option value="white">Grey</option>
        </select>
      </div>
      <div class="profInputButton">
        <button type="button" class="button" id="previewButton">Preview</button>
        <button type="button" class="button" id="submitButton">Submit</button>
        <button type="button" class="button" id="clearButton">Clear</button>
      </div>
    </div>
  </body>
  <script>
    refreshPreview();
    const preview = function(e) {
      // prevent default form action from being carried out
      e.preventDefault()

      const name = document.querySelector( '#name' ),
        pronouns = document.querySelector( '#pronouns' ),
        birthday = document.querySelector( '#birthday' ),
        email = document.querySelector( '#email' ),
        phone = document.querySelector( '#phone' ),
        hometown = document.querySelector( '#hometown' ),
        education = document.querySelector( '#education' ),
        major = document.querySelector( '#major' ),
        likes = document.querySelector( '#likes' ),
        primary = document.querySelector( '#primary' ),
        secondary = document.querySelector( '#secondary' );
      let json = { 
        Name: name.value,
        Pronouns: pronouns.value,
        Birthday: birthday.value,
        Age: 0,
        Email: email.value,
        Phone: phone.value,
        Hometown: hometown.value,
        Education: education.value,
        Major: major.value,
        Likes: likes.value,
        Primary: primary.value,
        Secondary: secondary.value,
        },
        body = JSON.stringify(json);

      if (
        name.value == "" ||
        pronouns.value == "" ||
        email.value == "" ||
        phone.value == "" ||
        hometown.value == "" ||
        education.value == "" ||
        major.value == "" ||
        likes.value == "" ||
        primary.value == "" ||
        secondary.value == ""
      ) {
        alert("Please fill out all fields");
        fetch( '/preview', {
          method:'POST',
          body, 
        })
        .then(function(response ) {
          // DO something with the reponse 
          refreshPreview();
          console.log( response )
        });
      }

      return false
    };
    
    // const submit = function(e) {
    //   // prevent default form action from being carried out
    //   e.preventDefault()

    //   const name = document.querySelector( '#name' ),
    //     pronouns = document.querySelector( '#pronouns' ),
    //     birthday = document.querySelector( '#birthday' ),
    //     email = document.querySelector( '#email' ),
    //     phone = document.querySelector( '#phone' ),
    //     hometown = document.querySelector( '#hometown' ),
    //     education = document.querySelector( '#education' ),
    //     major = document.querySelector( '#major' ),
    //     likes = document.querySelector( '#likes' ),
    //     primary = document.querySelector( '#primary' ),
    //     secondary = document.querySelector( '#secondary' );
    //   let json = { 
    //     Name: name.value,
    //     Pronouns: pronouns.value,
    //     Birthday: birthday.value,
    //     Email: email.value,
    //     Phone: phone.value,
    //     Hometown: hometown.value,
    //     Education: education.value,
    //     Major: major.value,
    //     Likes: likes.value,
    //     Primary: primary.value,
    //     Secondary: secondary.value,
    //     Age: 0,
    //     },
    //     body = JSON.stringify(json);

    //   if (
    //     name.value == "" ||
    //     pronouns.value == "" ||
    //     email.value == "" ||
    //     phone.value == "" ||
    //     hometown.value == "" ||
    //     education.value == "" ||
    //     major.value == "" ||
    //     likes.value == "" ||
    //     primary.value == "" ||
    //     secondary.value == ""
    //   ) {
    //     alert("Please fill out all fields");
    //     fetch( '/submit', {
    //       method:'POST',
    //       body, 
    //     })
    //     .then(function(response ) {
    //       // DO something with the reponse 
    //       console.log( response )
    //     });
    //   }

    //   return false
    // };

    window.onload = function() {
      const pButton = document.querySelector("previewButton")
      const sButton = document.querySelector("submitButton")
      const cButton = document.querySelector("clearButton")
      pbutton.onclick = preview;
      //sbutton.onclick = submit;
      //cbutton.onclick = clear;
    }

    function refreshPreview() {
      var preview = document.getElementById("preview");
      var name = document.getElementById("name").value;
      var pronouns = document.getElementById("pronouns").value;
      var birthday = document.getElementById("birthday").value;
      var email = document.getElementById("email").value;
      var phone = document.getElementById("phone").value;
      var hometown = document.getElementById("hometown").value;
      var education = document.getElementById("education").value;
      var major = document.getElementById("major").value;
      var likes = document.getElementById("likes").value;
      var primary = document.getElementById("primary").value;
      var secondary = document.getElementById("secondary").value;
      preview.innerHTML = name + pronouns + birthday + email + phone + hometown + education + major + likes + primary + secondary;
    }
  </script>
</html>
