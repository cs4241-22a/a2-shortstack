<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <h1 style="text-align: center">Welcome to the Homework Reminder!!!</h1>
    <form action="" style="float:right">
      <input
        type="text"
        onfocus="this.value=''"
        id="yourname"
        placeholder="Your Name Here"
      />
      <input
        type="text"
        onfocus="this.value=''"
        id="date"
        placeholder="Today's Date"
      />
      <input list="classes" name="hwList" id="hwList" placeholder="Subject Here" />
      <datalist id="classes">
        <option value="Math"></option>
        <option value="Science"></option>
        <option value="English"></option>
        <option value="History"></option>
        <option value="Computer Science"></option>
      </datalist>
      <input
        type="text"
        onfocus="this.value=''"
        id="assignment"
        placeholder="Assignment Name"
      />
      <button id="submitBtn">submit</button>
    </form>
  </body>
  <script>

    const submit = function( e ) {
      // prevent default form action from being carried out
      e.preventDefault()

      const nameInput = document.querySelector( '#yourname' ),
            dateInput = document.querySelector( '#date' ),
            subjectInput = document.querySelector( '#subjectList' )
            assignmentInput = document.querySelector( '#assignment')      
      
            json = { yourname: nameInput.value,
                     date: dateInput.value,
                     subjectList: subjectInput.value,
                     assignment: assignmentInput.value
                   },
            body = JSON.stringify( json )
      
      nameInput.value = ''
      schoolInput.value = ''
      dateInput.value = ''
      subjectInput.value = ''
      assignmentInput.value = ''

      fetch( '/submit', {
        method:'POST',
        body
      })
      .then( response, => response.json() )
      .then( json => {
        json.forEach( item => {
          const p = document.createElement('p')
          p.innerText = JSON.stringify( item )
          document.body.appendChild( p )
        })
      })

      return false
    }

    window.onload = function() {
      const button = document.querySelector( 'button' )
      button.onclick = submit
    }
  </script>
</html>
